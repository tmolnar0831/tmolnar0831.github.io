<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Tom's IT Cafe - windows</title>
        <link rel="stylesheet" href="../theme/css/main.css" />
        <link href="https://tmolnar0831.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Tom's IT Cafe Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">Tom's IT Cafe <strong>Come, get some!</strong></a></h1>
                <nav><ul>
                    <li><a href="../pages/about.html">About me</a></li>
                    <li><a href="../category/general.html">General</a></li>
                    <li><a href="../category/linux.html">Linux</a></li>
                    <li><a href="../category/windows.html">Windows</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../fixing-kali-kex.html">Fixing the "Error connecting..." issue in Kali KeX on WSL</a></h1>
<footer class="post-info">
        <abbr class="published" title="2022-11-24T10:00:00+01:00">
                Published: Thu 24 November 2022
        </abbr>
		<br />
        <abbr class="modified" title="2022-11-24T10:00:00+01:00">
                Updated: Thu 24 November 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/tamas-molnar.html">Tamas Molnar</a>
        </address>
<p>In <a href="../category/windows.html">Windows</a>.</p>
<p>tags: <a href="../tag/windows.html">windows</a> <a href="../tag/wsl.html">wsl</a> <a href="../tag/howto.html">howto</a> <a href="../tag/kali.html">kali</a> <a href="../tag/kex.html">kex</a> </p>
</footer><!-- /.post-info --><p>Requirements:</p>
<ol>
<li>Kali distro is installed</li>
<li>KeX is installed</li>
<li>Kali is WSL version 2</li>
<li>Coffee is ready for consumption</li>
</ol>
<p>Time to time the Kali desktop on WSL stops working and spits out the following message:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Error</span> <span class="nv">connecting</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">KeX</span> <span class="nv">server</span>.
<span class="nv">Please</span> <span class="nv">try</span> <span class="s2">&quot;</span><span class="s">kex start</span><span class="s2">&quot;</span> <span class="nv">to</span> <span class="nv">start</span> <span class="nv">the</span> <span class="nv">service</span>.
<span class="k">If</span> <span class="nv">the</span> <span class="nv">server</span> <span class="nv">fails</span> <span class="nv">to</span> <span class="nv">start</span>, <span class="nv">please</span> <span class="nv">try</span> <span class="s2">&quot;</span><span class="s">kex kill</span><span class="s2">&quot;</span> <span class="nv">or</span> <span class="nv">restart</span> <span class="nv">your</span> <span class="nv">WSL2</span> <span class="nv">session</span> <span class="nv">and</span> <span class="nv">try</span> <span class="nv">again</span>.
</code></pre></div>

<p>Certainly the "solution" from the error message does not work.</p>
<p>In my case the socket for the VNC server "stuck" and it causes the isse, so my solution is:</p>
<p>In the <strong>Kali terminal</strong>:</p>
<div class="highlight"><pre><span></span><code>sudo rm -rf /tmp/.X1-lock
</code></pre></div>

<p>Then in <strong>PowerShell</strong> I shut down every running instance:</p>
<div class="highlight"><pre><span></span><code>wsl --shutdown
</code></pre></div>

<p>After it starting a Kali will be able to start the TigerVNC server and the connection will work. Just use</p>
<div class="highlight"><pre><span></span><code>kex
</code></pre></div>

<p>If you have a comment or other opinion, visit <a href="https://discord.gg/YbSYGsQYES">Tom's IT Cafe Discord Server</a> and share it!</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="../installing-kali-on-wsl.html" rel="bookmark"
                           title="Permalink to Installing Kali Linux on WSL">Installing Kali Linux on WSL</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2022-05-11T00:00:00+02:00">
                Published: Wed 11 May 2022
        </abbr>
		<br />
        <abbr class="modified" title="2022-05-11T00:00:00+02:00">
                Updated: Wed 11 May 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/tamas-molnar.html">Tamas Molnar</a>
        </address>
<p>In <a href="../category/windows.html">Windows</a>.</p>
<p>tags: <a href="../tag/linux.html">linux</a> <a href="../tag/wsl.html">wsl</a> <a href="../tag/windows.html">windows</a> <a href="../tag/howto.html">howto</a> </p>
</footer><!-- /.post-info -->                <h1>Pre-install steps</h1>
<ul>
<li>WSL must be installed on the host machine prior this task. Microsoft has an <a href="https://docs.microsoft.com/en-us/windows/wsl/install">extensive documentation</a> on the topic.</li>
<li>Basic WSL management skills are nice to have, like importing/exporting/removing WSL instances. Use <code>wsl --help</code> for reference.</li>
<li>Read the <a href="https://www.kali.org/get-kali/#kali-wsl">Kali documentation</a> about the topic as well.</li>
</ul>
<h1>Kali …</h1>
                <a class="readmore" href="../installing-kali-on-wsl.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="../how-to-backup-and-restore-wsl.html" rel="bookmark"
                           title="Permalink to How to backup and restore a distro on WSL">How to backup and restore a distro on WSL</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2022-05-02T00:00:00+02:00">
                Published: Mon 02 May 2022
        </abbr>
		<br />
        <abbr class="modified" title="2022-05-02T00:00:00+02:00">
                Updated: Mon 02 May 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="../author/tamas-molnar.html">Tamas Molnar</a>
        </address>
<p>In <a href="../category/windows.html">Windows</a>.</p>
<p>tags: <a href="../tag/windows.html">windows</a> <a href="../tag/wsl.html">wsl</a> <a href="../tag/howto.html">howto</a> </p>
</footer><!-- /.post-info -->                <p>Follow the process on my <a href="https://youtu.be/dx2WoQo8hho">YouTube video</a>!</p>
<p>Backing up and restoring WSL distros is easier than anyone can think! It is simply an export of the stopped distro that can be moved on an external disk or share. Restoring a backup is importing the generated tar archive.</p>
<p>Moreover we can …</p>
                <a class="readmore" href="../how-to-backup-and-restore-wsl.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://tmolnar0831.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://discord.gg/4829xMBm">Discord</a></li>
                            <li><a href="https://www.reddit.com/user/st_iron">Reddit</a></li>
                            <li><a href="https://www.youtube.com/channel/UC28ChJtG8OTp1_5AWwpoh0w">YouTube</a></li>
                            <li><a href="https://github.com/tmolnar0831">GitHub</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>